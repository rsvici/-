!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.UITools={})}(this,function(t){"use strict";var L={MouseOver:1,MouseOut:2,MouseMove:3,MouseUp:4,MouseDown:5,MouseWheel:6,Click:7,DblClick:8,DragStart:9,Dragging:10,DragEnd:11,Resize:12,ContextMenu:13};function l(t,e,i){this.event=t,this.target=e,this.args=i}function e(){this.dom=null,this._listeners={},this._mouseEnable=!0,this._listened=null;var r=[],e=[],h=[],l=0,i=!1,o=null,c=this,n=function(t){var e,i,n,s,o=Date.now();0<l&&o-l<300&&0===(i=h,n=(e=r)[0]-i[0],s=e[1]-i[1],Math.sqrt(n*n+s*s))?(l=0,u(t)):(l=o,r[0]=h[0],r[1]=h[1],a(t))},a=function(t){w(L.Click,t)},u=function(t){w(L.DblClick,t)},s=function(t){c._mouseEnable&&(o=null,i&&(w(L.DragEnd,t),i=!1,document.removeEventListener("mousemove",p,!1),document.removeEventListener("mouseup",s,!1),document.removeEventListener("touchmove",p,!1),document.removeEventListener("touchend",s,!1)))},p=function(t){c._mouseEnable&&i&&w(L.Dragging,t)},_=function(t){c._mouseEnable&&w(L.MouseOver,t)},d=function(t){c._mouseEnable&&w(L.MouseOut,t)},v=function(t){c._mouseEnable&&(w(L.MouseUp,t),o=null,h[0]=t.clientX,h[1]=t.clientY,h[0]===e[0]&&h[1]===e[1]&&n(t))},f=function(t){c._mouseEnable&&(w(L.MouseDown,t),o=t.currentTarget,e[0]=t.clientX,e[1]=t.clientY)},m=function(t){c._mouseEnable&&(w(L.MouseMove,t),i||o!==t.currentTarget||(w(L.DragStart,t),i=!0,document.addEventListener("mousemove",p,!1),document.addEventListener("mouseup",s,!1)))},g=function(t){c._mouseEnable&&w(L.MouseWheel,t)},y=function(t){c._mouseEnable&&(1<t.touches.length||(w(L.MouseDown,t),o=t.currentTarget,e[0]=t.touches[0].pageX,e[1]=t.touches[0].pageY))},E=function(t){c._mouseEnable&&(1<t.changedTouches.length||(w(L.MouseMove,t),i||o!==t.currentTarget||(w(L.DragStart,t),i=!0,document.addEventListener("touchmove",p,!!C&&{passive:!1}),document.addEventListener("touchend",s,!!C&&{passive:!1}))))},k=function(t){c._mouseEnable&&(1<t.changedTouches.length||(w(L.MouseUp,t),o=null,h[0]=t.changedTouches[0].pageX,h[1]=t.changedTouches[0].pageY,h[0]===e[0]&&h[1]===e[1]&&n(t)))},b=function(t){c._mouseEnable&&w(L.ContextMenu,t)},w=function(t,e){if(c._listeners.hasOwnProperty(t))for(var i=c._listeners[t],n=0,s=i.length;n<s;n++)i[n].dispatch(e)},C=!1;try{var t=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("test",null,t)}catch(t){}this._addEventListener=function(t){var e,i=this.dom,n=[];switch(t){case L.MouseOver:n=["mouseover"];break;case L.MouseOut:n=["mouseout"];break;case L.MouseMove:n=["mousemove","touchmove"];break;case L.MouseUp:n=["mouseup","touchend"];break;case L.MouseDown:n=["mousedown","touchstart"];break;case L.MouseWheel:n=["mousewheel"];break;case L.ContextMenu:n=["contextmenu"];break;case L.Click:case L.DblClick:n=["mousedown","touchstart","mouseup","touchend"];break;case L.DragStart:case L.Dragging:case L.DragEnd:n=["mousedown","touchstart","mousemove","touchmove","mouseup","touchend"]}for(var s=null,o=0,r=n.length;o<r;o++)if(e=n[o],this._listened||(this._listened=[]),!(-1<this._listened.indexOf(e))){switch(e){case"mouseover":s=_;break;case"mouseout":s=d;break;case"mousemove":s=m;break;case"mouseup":s=v;break;case"mousedown":s=f;break;case"mousewheel":s=g;break;case"touchstart":s=y;break;case"touchmove":s=E;break;case"touchend":s=k;break;case"contextmenu":s=b}i.addEventListener(e,s,!!C&&{passive:!1}),this._listened.push(e)}},this._dispose=function(){for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)){for(var e=this._listeners[t],i=0,n=e.length;i<n;i++)e[i].dispose(),e[i]=null;delete this._listeners[t]}this._listeners=null,o=null;var s=this.dom;s&&(s.removeEventListener("mouseover",_,!1),s.removeEventListener("mouseout",d,!1),s.removeEventListener("mousemove",m,!1),s.removeEventListener("mouseup",v,!1),s.removeEventListener("mousedown",f,!1),s.removeEventListener("mousewheel",g,!1),s.removeEventListener("touchstart",y,!1),s.removeEventListener("touchmove",E,!1),s.removeEventListener("touchend",k,!1),s.removeEventListener("contextmenu",b,!1),this.dom=null,this._listened=null)}}Object.assign(l.prototype,{dispatch:function(t){var e=[t];e=null===this.args?e:e.concat(this.args),null!==this.event&&this.event.apply(this.target,e)},dispose:function(){this.event=null,this.target=null,this.args=null}}),e.prototype={get mouseEnable(){return this._mouseEnable},set mouseEnable(t){this._mouseEnable=!1!==t},addEventListener:function(t,e,i){if(this._hasEventType(t)){this._addEventListener(t),this._listeners.hasOwnProperty(t)||(this._listeners[t]=[]);var n=this._listeners[t];if(-1<this._findListener(n,e))return;var s=null;if(3<arguments.length){s=[];for(var o=3,r=arguments.length;o<r;o++)s.push(arguments[o])}var h=new l(e,i=i||this,s);n.push(h)}},removeEventListener:function(t,e){var n=this._listeners.hasOwnProperty(t)?this._listeners[t]:null;if(null!==n&&0!==n.length){var s=this._findListener(n,e);-1<s&&(n[i].dispose(),this._listeners[t].splice(s,1))}},_hasEventType:function(t){for(var e in L)if(L[e]===t)return!0;return!1},_findListener:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i].callback===e)return i;return-1},dispose:function(){this._dispose()}};var s={};function r(t,e,i){i=i||"div",s.Dom.call(this,i,e),t&&this.setId(t),this._initView();var n=this;this._onLoad=function(){n.updateView(),window.removeEventListener("load",n._onLoad,!1)},"complete"!==document.readyState&&window.addEventListener("load",this._onLoad,!1)}function n(t,e){this._cssLi=null,this._items=[],this._maxHeight=0;var i=null;e&&(i=e.hasOwnProperty("ul")?e.ul:null,this._cssLi=e.hasOwnProperty("normal")?e.normal:null),r.call(this,t,i,"ul"),this._initEventListener()}function o(t,e,i){r.call(this,t,i,"li"),this.id=t,this.add(e)}function h(t,e){this.equalHandler=!0,this._cssActive=null,this._switchEvent=null,this._eventTarget=null,this._selectedItemId=null,n.call(this,t,e),e&&(this._cssActive=e.hasOwnProperty("active")?e.active:null)}function c(t,e,i,n){o.call(this,t,e,i),this.selected=!1,this._clickEvent=null,this._eventTarget=null,this._classNormal=i,this._classActive=n||i,this._initEventListener()}function a(t,e){n.call(this,t,e),this._cssActive=null,this._clickFunc=null,this._target=null,e&&(this._cssActive=e.hasOwnProperty("active")?e.active:null)}function u(t,e){this._cssDiv=null,this._list=new h(t,e),this._list.equalHandler=!1,e&&(this._cssDiv=e.hasOwnProperty("div")?e.div:null),r.call(this,t,this._cssDiv)}function p(t,e){e||(e={}),this._value=null,this._changeEvent=null,this._eventTarget=null,this._title=null,this._container=null,this._index=0,this._selectedItemId=-1,this._scrollTo=-1,this._list=new _("sOptions",e),this._document=new s.Element(document);var i="";e&&(i=e.hasOwnProperty("div")?e.div:""),r.call(this,t,i+" noSelect"),this._initEventListener()}function _(t,e){h.call(this,t,e)}function d(t,e,i,n,s,o){c.call(this,t,e,s,o),this.title=i,this.value=n}function v(t,e,i,n,s){this._min=i||0,this._max=n||100,this._offsetX=null,this._value=this._min,this._fixed=s||0,this._changeEvent=null,this._eventTarget=null,this._dragStartEvent=null,this._dragStartEventTarget=null,this._dragEndEvent=null,this._dragEndEventTarget=null,this._cssBg="slider-bar-bg",this._cssBar="slider-bar",this._cssBlock="slider-block";var o="slider";e&&(o=e.hasOwnProperty("slider")?e.slider:o,this._cssBg=e.hasOwnProperty("barBg")?e.barBg:this._cssBg,this._cssBar=e.hasOwnProperty("bar")?e.bar:this._cssBar,this._cssBlock=e.hasOwnProperty("block")?e.block:this._cssBlock),r.call(this,t,o),this._initEventListener()}function f(t,e,i,n,s){this._slider=new v(null,e,i,n,s),this._changeEvent=null,this._eventTarget=null,this._cssInput="inputBox";var o="inputSlider";e&&(this._cssInput=e.hasOwnProperty("input")?e.input:this._cssInput,o=e.hasOwnProperty("inputSlider")?e.inputSlider:o),r.call(this,t,o),this._initEventListener()}function m(t,e){this._container=null,this._changeEvent=null,this._eventTarget=null,this._inited=!1,this._color=tinycolor("#ffffff");var i="rawColorPicker";e&&(i=e.hasOwnProperty("colorPicker")?e.colorPicker:i),r.call(this,t,i),this._initEventListener()}function g(t,e,i){this._picker=null,this._pickerBg=null,this._container=null,this._document=new s.Element(document),this._colorPicker=i||new m("rawColorPicker",e),this._color=null,this._changeEvent=null,this._eventTarget=null,this._cssPicker="picker";var n=null;e&&(n=e.hasOwnProperty("div")?e.div:n),r.call(this,t,n),this._initEventListener()}function y(t,e,i){this._slider=new f("slider",e,0,100),this._targetColor=tinycolor("#000000"),g.call(this,t,e,i)}s.Element=function(t){e.call(this),this.dom=t,this.parent=null,this.children=[],this.isPunkUI=!0},s.Element.prototype=Object.assign(Object.create(e.prototype),{constructor:s.Element,add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];null!==e.parent&&(e.parent!==this?e.parent.remove(e):this.children.push(e)),this.dom.appendChild(e.dom),e.parent=this}return this},prepend:function(){for(var t=this.dom.firstChild,e=0;e<arguments.length;e++){var i=arguments[e];this.dom.insertBefore(i.dom,t),this.children.push(i),i.parent=this}return this},insertAfter:function(t,e){if(-1!==this.children.indexOf(e)){null!==t.parent&&t.parent!==this&&(t.parent.remove(t),this.add(t));var i=e.dom.nextSibling;return i?this.dom.insertBefore(t.dom,i):this.dom.appendChild(t.dom),this}console.error(e+" is not an child of this.")},insertBefore:function(t,e){if(-1!==this.children.indexOf(e))return null!==t.parent&&t.parent!==this&&(t.parent.remove(t),this.add(t)),this.dom.insertBefore(t.dom,e.dom),this;console.error(e+" is not an child of this.")},remove:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e instanceof s.Element?(this.dom.removeChild(e.dom),this.children.splice(this.children.indexOf(e),1),e.parent=null):console.error("UI.Element:",e,"is not an instance of UI.Element.")}return this},clear:function(){for(0<this.children.length&&this.remove(this.children);this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)},setId:function(t){return this.dom.id=t,this},setClass:function(t){return this.dom.className=t,this},hasClass:function(t){return this.dom.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t){return this.hasClass(t)||(this.dom.className+=" "+t),this},removeClass:function(t){for(var e=this.dom.className.split(" "),i=0,n=e.length;i<n;i++)if(e[i]==t){e.splice(i,1);break}return this.dom.className=e.join(" "),this},getStyleValue:function(t){var e=this.dom.style[t];return""===e||null==e?this.dom.currentStyle?this.dom.currentStyle[t]:window.getComputedStyle(this.dom,null).getPropertyValue(t):e},setStyle:function(t,e){for(var i=0;i<e.length;i++)this.dom.style[t]=e[i];return this},getAttr:function(t){return this.dom.getAttribute(t),this},setAttr:function(t,e){return this.dom.setAttribute(t,e),this},setDisabled:function(t){return this.dom.disabled=t,this},setTextContent:function(t){return this.dom.textContent=t,this},html:function(t){return this.dom.innerHTML=t,this},dispose:function(){for(;this.children.length;)this.children[0].dispose();this.clear(),(this.children=null)!==this.parent&&this.parent.remove(this),e.prototype.dispose.call(this)}}),Object.defineProperties(s.Element.prototype,{visible:{get:function(){return"none"!==this.getStyleValue("display")},set:function(t){this.setStyle("display",[t?"block":"none"])}},opacity:{get:function(){var t=Number(this.getStyleValue("opacity"));return t||0===t||(t=1),t},set:function(t){this.setStyle("opacity",[t])}}}),s.Dom=function(t,e){return s.Element.call(this),this.dom=document.createElement(t),e&&this.setClass(e),this},s.Dom.prototype=Object.create(s.Element.prototype),s.Dom.prototype.constructor=s.Dom,s.Text=function(t){s.Element.call(this);var e=document.createElement("span");return e.className="Text",e.style.cursor="default",e.style.display="inline-block",e.style.verticalAlign="middle",this.dom=e,this.setValue(t),this},s.Text.prototype=Object.create(s.Element.prototype),s.Text.prototype.constructor=s.Text,s.Text.prototype.getValue=function(){return this.dom.textContent},s.Text.prototype.setValue=function(t){return void 0!==t&&(this.dom.textContent=t),this},(r.prototype=Object.create(s.Dom.prototype)).constructor=r,Object.defineProperty(r.prototype,"x",{get:function(){var t="absolute"===this.getStyleValue("position")?"left":"margin-left",e=this.getStyleValue(t)||0;return e&&(e=e.replace(/px/,"")),e&&"auto"!==e||(e=0),Number(e)},set:function(t){var e="absolute"===this.getStyleValue("position")?"left":"margin-left";this.setStyle(e,[t+"px"])}}),Object.defineProperty(r.prototype,"y",{get:function(){var t="absolute"===this.getStyleValue("position")?"top":"margin-top",e=this.getStyleValue(t);return e&&(e=e.replace(/px/,"")),e&&"auto"!==e||(e=0),Number(e)},set:function(t){var e="absolute"===this.getStyleValue("position")?"top":"margin-top";this.setStyle(e,[t+"px"])}}),Object.defineProperty(r.prototype,"width",{get:function(){return this.dom.clientWidth||0},set:function(t){var e="string"==typeof t&&-1<t.indexOf("%")?"":"px";this.setStyle("width",[t+e])}}),Object.defineProperty(r.prototype,"height",{get:function(){return this.dom.clientHeight||0},set:function(t){var e="string"==typeof t&&-1<t.indexOf("%")?"":"px";this.setStyle("height",[t+e])}}),r.prototype._initView=function(){},r.prototype.updateView=function(){for(var t,e=0,i=this.children.length;e<i;e++)void 0!==(t=this.children[e]).updateView&&t.updateView()},r.prototype.dispose=function(){s.Dom.prototype.dispose.call(this)},((n.prototype=Object.create(r.prototype)).constructor=n).prototype._initEventListener=function(){this.addEventListener(L.MouseDown,this._onMouseDown,this),this.addEventListener(L.MouseUp,this._onMouseDown,this),this.addEventListener(L.MouseWheel,this._onMouseDown,this)},n.prototype.updateView=function(){r.prototype.updateView.call(this),this.updateScrollBar(this._maxHeight)},Object.defineProperty(n.prototype,"visible",{get:function(){return"none"!==this.getStyleValue("display")},set:function(t){var e=t?"block":"none";this.setStyle("display",[e]),this.updateScrollBar(this._maxHeight)}}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){0==t&&(t=0),this._maxHeight=t,this.updateScrollBar(this._maxHeight)}}),n.prototype.addItem=function(t,e){if(null===this.getItem(t)){if(e.isPunkUI){var i=this._createItem.apply(this,arguments);return this.add(i),this._items.push(i),i}console.error("List-addItem: arg only takes PunkUI")}else console.error("List-addItem: already has item: "+t)},n.prototype.getItem=function(t){for(var e,i=0,n=this._items.length;i<n;i++)if((e=this._items[i]).id===t)return e;return null},n.prototype.removeItem=function(t){var e=this.getItem(t);if(e){this.remove(e),e.dispose();var i=this._items.indexOf(e);this._items.splice(i,1)}},n.prototype.updateScrollBar=function(t){t=null==t?this._maxHeight:t;var e=this._getCurrentHeight();e&&(0===t||e<=t?(this.height=e,this.setStyle("overflow-y",["none"])):(this.height=t,this.setStyle("overflow-y",["scroll"])))},n.prototype.scrollTo=function(t){for(var e=this._items[0],i=Math.max(1,Math.floor(this.width/e.width)),n=e.height,s=0,o=this._items.length;s<o&&this._items[s].id!==t;s++);this.dom.scrollTop=n*Math.floor(s/i)},n.prototype._createItem=function(t,e){return new o(t,e,this._cssLi)},n.prototype._getCurrentHeight=function(){for(var t=0,e=0,i=this._items.length;e<i;e++)t+=this._items[e].height;return t},n.prototype._onMouseDown=function(t){t.stopPropagation()},n.prototype._removeEventListener=function(){this.removeEventListener(L.MouseDown,this._onMouseDown,this),this.removeEventListener(L.MouseUp,this._onMouseDown,this),this.removeEventListener(L.MouseWheel,this._onMouseDown,this)},n.prototype.dispose=function(){r.prototype.dispose.call(this),this._removeEventListener();for(var t=0,e=this._items.length;t<e;t++)this._items[t].dispose();this._cssLi=null,this._items=null},((o.prototype=Object.create(r.prototype)).constructor=o).prototype.dispose=function(){this.id=null,r.prototype.dispose.call(this)},((h.prototype=Object.create(n.prototype)).constructor=h).prototype.addItem=function(t,e){var i=n.prototype.addItem.apply(this,arguments);return i.onClick(this._onItemClick,this),i},h.prototype.onSwitch=function(t,e){this._switchEvent=t,this._eventTarget=e},h.prototype.switchItem=function(t,e){var i=this._selectedItemId;if(this.equalHandler||i!==t){e=!1!==e;var n=this.getItem(t);i!==t&&(null!=i&&this.getItem(i).unSelect(),n.select(),this._selectedItemId=t),this._switchEvent&&e&&this._switchEvent.call(this._eventTarget?this._eventTarget:this,n)}},h.prototype._createItem=function(t,e){return new c(t,e,this._cssLi,this._cssActive)},h.prototype._onItemClick=function(t,e){this.switchItem(e.id)},h.prototype.dispose=function(){n.prototype.dispose.call(this),this._cssActive=null,this._switchEvent=null,this._eventTarget=null,this._selectedItemId=null},((c.prototype=Object.create(o.prototype)).constructor=c).prototype._initEventListener=function(){this.addEventListener(L.Click,this._onClick,this)},c.prototype.onClick=function(t,e){this._clickEvent=t,this._eventTarget=e},c.prototype.select=function(){this.setClass(this._classActive),this.selected=!0},c.prototype.unSelect=function(){this.setClass(this._classNormal),this.selected=!1},c.prototype._onClick=function(t){this._clickEvent&&this._clickEvent.call(this._eventTarget?this._eventTarget:this,t,this)},c.prototype._removeEventListener=function(){this.removeEventListener(L.Click,this._onClick,this)},c.prototype.dispose=function(){this._removeEventListener(),this.selected=!1,this._clickEvent=null,this._eventTarget=null,this._classNormal=null,this._classActive=null,o.prototype.dispose.call(this)},((a.prototype=Object.create(n.prototype)).constructor=a).prototype._initEventListener=function(){n.prototype._initEventListener.call(this)},a.prototype.bindClick=function(t,e){this._clickFunc=t,this._target=e},a.prototype.addItem=function(t,e){var i=n.prototype.addItem.call(this,t,e);return i.onClick(this._onClick,this),i},a.prototype._onClick=function(t,e){e.selected?e.unSelect():e.select(),this._clickFunc&&this._clickFunc.call(this._target,e)},a.prototype._createItem=function(t,e){return new c(t,e,this._cssLi,this._cssActive)},a.prototype.dispose=function(){r.prototype.dispose.call(this),this._clickFunc=null,this._target=null},((u.prototype=Object.create(r.prototype)).constructor=u).prototype._initView=function(){this.add(this._list)},u.prototype.addTab=function(t,e){return this._list.addItem(t,e)},u.prototype.switchTab=function(t,e){this._list.switchItem(t,e)},u.prototype.onSwitch=function(t,e){this._list.onSwitch(t,e)},u.prototype.dispose=function(){this._list.dispose(),this._list=null,this._cssDiv=null,r.prototype.dispose.call(this)},(p.prototype=Object.create(r.prototype)).constructor=p,Object.defineProperty(p.prototype,"value",{get:function(){return this._value}}),Object.defineProperty(p.prototype,"maxHeight",{get:function(){return this._list.maxHeight},set:function(t){this._list.maxHeight=t}}),p.prototype._initEventListener=function(){this._title.addEventListener(L.MouseDown,this._onMouseDown,this),this._title.addEventListener(L.Click,this._onTitleClick,this),this._document.addEventListener(L.MouseUp,this._onMouseUp,this)},p.prototype._initView=function(){this._title=new r("sTitle"),this._container=new r("container","abs"),this._list.onSwitch(this._onOptionClick,this),this._container.add(this._list),this.add(this._title,this._container),this._container.visible=!1},p.prototype.addOption=function(t,e,i){var n=this._list.addItem(this._index,i,t,e);return 0===this._index&&this.selectOption(0,!1),this._index++,n},p.prototype.selectOption=function(t,e,i){if(this._container.visible=!1,this._selectedItemId!==t){(i=!1!==i)&&(this._list.switchItem(t,e),this._scrollTo=t);var n=this._list.getItem(t);this._title.setTextContent(n.title),this._value=n.value,this._selectedItemId=t,this._changeEvent&&e&&this._changeEvent.call(this._eventTarget?this._eventTarget:this,n)}},p.prototype.onChange=function(t,e){this._changeEvent=t,this._eventTarget=e},p.prototype._onTitleClick=function(t){t.stopPropagation(),t.preventDefault(),this._container.visible=!this._container.visible,this._container.visible&&(this._list.updateScrollBar(),-1<this._scrollTo&&(this._list.scrollTo(this._scrollTo),this._scrollTo=-1))},p.prototype._onOptionClick=function(t){this.selectOption(t.id,!0,!1)},p.prototype._onMouseDown=function(t){t.stopPropagation(),t.preventDefault()},p.prototype._onMouseUp=function(){this._container.visible=!1},p.prototype._removeEventListener=function(){this._title.removeEventListener(L.MouseDown,this._onMouseDown,this),this._title.removeEventListener(L.Click,this._onTitleClick,this),this._document.removeEventListener(L.MouseUp,this._onMouseUp,this)},p.prototype.dispose=function(){this._removeEventListener(),this._list.dispose(),this._container.dispose(),this._title.dispose(),this._document.dispose(),this._list=null,this._container=null,this._value=null,this._changeEvent=null,this._eventTarget=null,this._title=null,this._document=null,r.prototype.dispose.call(this)},((_.prototype=Object.create(h.prototype)).constructor=_).prototype._createItem=function(t,e,i,n){return new d(t,e,i,n,this._cssLi,this._cssActive)},((d.prototype=Object.create(c.prototype)).constructor=d).prototype._onClick=function(t){c.prototype._onClick.call(this,t)},d.prototype.dispose=function(){this.title=null,this.value=null,c.prototype.dispose.call(this)},(v.prototype=Object.create(r.prototype)).constructor=v,Object.defineProperty(v.prototype,"value",{get:function(){return this._value},set:function(t){this._updateValue(t,!1,!1)}}),v.prototype._initView=function(){this._barBg=new r("barBg",this._cssBg),this._bar=new r("bar",this._cssBar),this._block=new r("block",this._cssBlock),this.add(this._barBg),this._barBg.add(this._bar),this._bar.add(this._block)},v.prototype._initEventListener=function(){this.addEventListener(L.MouseDown,this._onMouseDown,this),this.addEventListener(L.DragStart,this._onBlockDragStart,this),this.addEventListener(L.Dragging,this._onBlockDragging,this),this.addEventListener(L.DragEnd,this._onBlockDragEnd,this)},v.prototype.updateView=function(){r.prototype.updateView.call(this),this._updateValue(this._value,!1,!1)},v.prototype.onChange=function(t,e){this._changeEvent=t,this._eventTarget=e},v.prototype.onDragStart=function(t,e){this._dragStartEvent=t,this._dragStartEventTarget=e},v.prototype.onDragEnd=function(t,e){this._dragEndEvent=t,this._dragEndEventTarget=e},v.prototype._onMouseDown=function(t){null===this._offsetX&&(this._offsetX=this._getOffsetX(this._barBg.dom));var e=t.changedTouches?t.changedTouches[0].pageX:t.pageX;e=Math.max(e,this._offsetX),e=Math.min(e,this._offsetX+this._barBg.width),this._updateValue((e-this._offsetX)/this._barBg.width,!0)},v.prototype._onBlockDragStart=function(t){this._dragStartEvent&&this._dragStartEvent.call(this._dragStartEventTarget?this._dragStartEventTarget:this)},v.prototype._onBlockDragging=function(t){t.stopPropagation(),t.preventDefault(),this._onMouseDown(t)},v.prototype._onBlockDragEnd=function(t){this._dragEndEvent&&this._dragEndEvent.call(this._dragEndEventTarget?this._dragEndEventTarget:this)},v.prototype._updateValue=function(t,e,i){e=!0===e,i=!1!==i,t=Number(t);var n=this._value;this._value=Number((e?(this._max-this._min)*t+this._min:t).toFixed(this._fixed)),this._value=Math.max(this._min,Math.min(this._max,this._value));var s=e?t:(this._value-this._min)/(this._max-this._min);this._block.x=s*this._barBg.width-this._block.width/2,this._bar.width=100*s+"%",n!==this._value&&i&&this._changeEvent&&this._changeEvent.call(this._eventTarget?this._eventTarget:this,this._value)},v.prototype._getOffsetX=function(t){var e=t.offsetLeft;return t.offsetParent&&(e+=this._getOffsetX(t.offsetParent)),e},v.prototype._removeEventListener=function(){this.removeEventListener(L.MouseDown,this._onMouseDown,this),this.removeEventListener(L.DragStart,this._onBlockDragStart,this),this.removeEventListener(L.Dragging,this._onBlockDragging,this),this.removeEventListener(L.DragEnd,this._onBlockDragEnd,this)},v.prototype.dispose=function(){this._removeEventListener(),this._bar.dispose(),this._block.dispose(),this._bar=null,this._block=null,this._changeEvent=null,this._eventTarget=null,this._dragStartEvent=null,this._dragStartEventTarget=null,this._dragEndEvent=null,this._dragEndEventTarget=null,r.prototype.dispose.call(this)},(f.prototype=Object.create(r.prototype)).constructor=f,Object.defineProperty(f.prototype,"value",{get:function(){return this._slider.value},set:function(t){this._updateValue(t,!0,!0,!1)}}),f.prototype._initView=function(){this._input=new r("inputBox",this._cssInput,"input"),this.add(this._slider),this.add(this._input)},f.prototype._initEventListener=function(){var e=this;this._input.dom.onchange=function(){var t=Number(this.value);0===t||t||(t=e.value),e._updateValue(t,!1,!0),this.value=e.value},this._slider.onChange(this._updateValue,this)},f.prototype.onChange=function(t,e){this._changeEvent=t,this._eventTarget=e},f.prototype._updateValue=function(t,e,i,n){e=!1!==e,n=!1!==n,(i=!0===i)&&(this._slider.value=t),e&&(this._input.dom.value=this.value),n&&this._changeEvent&&this._changeEvent.call(this._eventTarget?this._eventTarget:this,this.value)},f.prototype._removeEventListener=function(){this._input.dom.onchange=null},f.prototype.dispose=function(){this._removeEventListener(),this._slider.dispose(),this._slider=null,this._changeEvent=null,this._eventTarget=null,r.prototype.dispose.call(this)},((m.prototype=Object.create(r.prototype)).constructor=m).prototype._initView=function(){this._container=new r("colorPickerContainer"),this.add(this._container)},m.prototype._initEventListener=function(){this.addEventListener(L.Click,this._onColorPickerClick,this)},m.prototype.updateView=function(){if(!this._inited){this._inited=!0,r.prototype.updateView.call(this);var e=this;$(this._container.dom).spectrum({showInput:!0,showButtons:!1,preferredFormat:"hex",theme:"sp-dark",flat:!0,color:e._color,move:function(t){e._color=t,e._changeEvent&&e._changeEvent.call(e._eventTarget,e._color)}})}},Object.defineProperty(m.prototype,"visible",{get:function(){return"none"!==this.getStyleValue("display")},set:function(t){var e=t?"block":"none";this.setStyle("display",[e]),t&&($(this._container.dom).spectrum("show"),this.updateColor())}}),Object.defineProperty(m.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t instanceof tinycolor?t:tinycolor(t),this.updateColor()}}),m.prototype.updateColor=function(){var t=$(this._container.dom);t.spectrum("set",this._color),t.spectrum("hide"),t.spectrum("show")},m.prototype.onChange=function(t,e){this._changeEvent=t,this._eventTarget=e},m.prototype._removeEventListener=function(){this.removeEventListener(L.Click,this._onColorPickerClick,this)},m.prototype.dispose=function(){r.prototype.dispose.call(this),this._removeEventListener(),this._container.dispose(),this._container=null,this._changeEvent=null,this._eventTarget=null},m.prototype._onColorPickerClick=function(t){t.stopPropagation()},((g.prototype=Object.create(r.prototype)).constructor=g).prototype._initView=function(){this._container=new r("container","picker-container"),this._picker=new r("picker",this._cssPicker,"A"),this._pickerBg=new r("pickerBg","picker-Bg"),this._picker.add(this._pickerBg),this._container.add(this._picker),this.add(this._container),this._colorPicker.visible=!1},g.prototype._initEventListener=function(){this._picker.addEventListener(L.Click,this._onClick,this),this._document.addEventListener(L.Click,this._onDocumentClick,this)},Object.defineProperty(g.prototype,"color",{get:function(){return this._color.toHexString()},set:function(t){this._setColor(t)}}),g.prototype.updateView=function(){r.prototype.updateView.call(this),this._colorPicker.updateView()},g.prototype.onChange=function(t,e){this._changeEvent=t,this._eventTarget=e},g.prototype._onColorChange=function(t){var e=(this._color=t).toHexString();this._pickerBg.setStyle("background-color",[e]),this._changeEvent&&this._changeEvent.call(this._eventTarget,e)},g.prototype._onClick=function(t){t.stopPropagation(),this._colorPicker.parent!==this?(this.add(this._colorPicker),this._colorPicker.color=this._color,this._colorPicker.visible=!0,this._colorPicker.onChange(this._onColorChange,this)):this._colorPicker.visible=!this._colorPicker.visible},g.prototype._onDocumentClick=function(t){this._colorPicker.visible=!1},g.prototype._setColor=function(t){this._color=tinycolor(t),this._pickerBg.setStyle("background-color",[t]),this._colorPicker.color=this._color},g.prototype._removeEventListener=function(){this._picker.removeEventListener(L.Click,this._onClick,this),this._document.removeEventListener(L.Click,this._onDocumentClick,this)},g.prototype.dispose=function(){this._removeEventListener(),this._picker.dispose(),this._pickerBg.dispose(),this._container.dispose(),this._document.dispose(),this._colorPicker.dispose(),this._picker=null,this._pickerBg=null,this._container=null,this._document=null,this._colorPicker=null,this._color=null,this._changeEvent=null,this._eventTarget=null},(y.prototype=Object.create(g.prototype)).constructor=y,Object.defineProperty(y.prototype,"color",{get:function(){return this._getMixColor(this._color).toHexString()},set:function(t){this._setColor(t)}}),y.prototype._initView=function(){g.prototype._initView.call(this),this._slider.value=100,this._slider.x=15,this._container.add(this._slider)},y.prototype._initEventListener=function(){g.prototype._initEventListener.call(this),this._slider.onChange(this._onSliderChange,this)},y.prototype._onSliderChange=function(t){this._onColorChange(this._color)},y.prototype._onColorChange=function(t){g.prototype._onColorChange.call(this,this._getMixColor(t)),this._color=t},y.prototype._getMixColor=function(t){var e=100-this._slider.value;return tinycolor.mix(t,this._targetColor,e)},y.prototype.dispose=function(){g.prototype.dispose.call(this)},t.Events=L,t.EventListener=e,t.BaseUI=r,t.UI=s,t.List=n,t.SelectableList=h,t.CheckList=a,t.Tab=u,t.DropDown=p,t.Slider=v,t.InputSlider=f,t.RawColorPicker=m,t.ColorPicker=g,t.ColorPicker2=y,Object.defineProperty(t,"__esModule",{value:!0})});
