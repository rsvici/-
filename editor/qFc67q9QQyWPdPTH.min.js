THREE.BlurPass=function(e,r){THREE.Pass.call(this),e=(e=e?parseInt(e):1)<=1?1:e,this.scale=r.scale||12;var t=r.width||window.innerWidth||1,s=r.height||window.innerHeight||1,a=THREE.HorizontalBlurShader,i=THREE.UniformsUtils.clone(a.uniforms),n=THREE.VerticalBlurShader,h=THREE.UniformsUtils.clone(n.uniforms);i.h.value=this.scale/t,h.v.value=this.scale/s;var l,d={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat};this.renderTargets=[];for(var u=0,E=2*e-1;u<E;u++)(l=new THREE.WebGLRenderTarget(t,s,d)).texture.generateMipmaps=!1,this.renderTargets[u]=l;this.materialHBlur=new THREE.ShaderMaterial({uniforms:i,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,depthTest:!1,depthWrite:!1}),this.materialVBlur=new THREE.ShaderMaterial({uniforms:h,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,depthTest:!1,depthWrite:!1}),this.uniformsH=i,this.uniformsV=h,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.BlurPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.BlurPass,setSize:function(e,r){for(var t=0,s=this.renderTargets.length;t<s;t++)this.renderTargets[t].setSize(e,r);this.uniformsH.h.value=this.scale/e,this.uniformsV.v.value=this.scale/r},render:function(e,r,t,s,a){for(var i,n,h,l=0,d=this.renderTargets.length;l<d;l+=2)i=0===l?t:this.renderTargets[l-1],n=this.renderTargets[l],this.uniformsH.tDiffuse.value=i.texture,this.quad.material=this.materialHBlur,e.render(this.scene,this.camera,n,!0),this.uniformsV.tDiffuse.value=n.texture,this.quad.material=this.materialVBlur,l<this.renderTargets.length-2&&(h=this.renderTargets[l+1],e.render(this.scene,this.camera,h,!0));this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,r,this.clear)}});
